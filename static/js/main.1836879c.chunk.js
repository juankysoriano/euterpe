(this["webpackJsonphuman-music"]=this["webpackJsonphuman-music"]||[]).push([[0],{77:function(t,e){},91:function(t,e,i){},92:function(t,e,i){},93:function(t,e,i){"use strict";i.r(e);var s=i(42),a=i.n(s),n=i(3),r=i.n(n),o=i(5),h=i(4),u=i(7),l=i.n(u),c=l.a.createContext(null),d=i(43),f=i(0),m=i(1),v=[["#09090935","#542c0a35","#3c201135"],["#000000","#ff5789","#e8b354"],["#000000","#49719d","#e8b354"],["#000000","#c23b22","#e8b354"],["#000000","#e8b354","#49719d"],["#000000","#fae2b7","#d62828"]],p=function(){function t(e,i,s){Object(f.a)(this,t),this.step=0,this.cellSize=void 0,this.sketch=void 0,this.automata=void 0,this.offset=void 0,this.sketch=e,this.automata=i,this.cellSize=this.sketch.width/i.size,this.offset=s}return Object(m.a)(t,[{key:"draw",value:function(){for(var t=0;t<this.automata.size;t++){this.sketch.noFill(),this.sketch.stroke(v[0][this.automata.state[t]]);for(var e=0;e<32/window.devicePixelRatio;e++)this.sketch.line(this.cellSize*t+this.cellSize/2+(2*Math.random()*this.cellSize-this.cellSize),this.cellSize*this.step+this.cellSize/2+(2*Math.random()*this.cellSize-this.cellSize),this.cellSize*t+this.cellSize/2+(2*Math.random()*this.cellSize-this.cellSize),this.cellSize*this.step+this.cellSize/2+(2*Math.random()*this.cellSize-this.cellSize))}this.step*this.cellSize>=this.sketch.height?(this.sketch.background(9,9,9,235),this.step=0):this.step++}}]),t}();p.Builder=function(){function t(){Object(f.a)(this,t),this.sketch=void 0,this.automata=void 0,this.offset=0}return Object(m.a)(t,[{key:"withSketch",value:function(t){return this.sketch=t,this}},{key:"withAutomata",value:function(t){return this.automata=t,this}},{key:"withOffset",value:function(t){return this.offset=t,this}},{key:"build",value:function(){if(null===this.automata)throw new Error("Must pass a cellular automata upon building");if(null===this.sketch)throw new Error("Must pass a p5 sketch upon building");return new p(this.sketch,this.automata,this.offset)}}]),t}();var b=i(13),g=i(47),A=function(){function t(e,i,s){Object(f.a)(this,t),this.note="",this.lastNote="",this.voice="",this.lastVoice="",this.notes=["C4","D4","C4","D4","E4","C4","D4","E4","F4","C4","D4","E4","F4","G4","C4","D4","E4","F4","G4","A4","B4"],this.voices=["C5","D5","C5","D5","E5","F5","C5","D5","E5","F5","G5","A5","B5"],this.chords=["C2major","C2maj7","D2m","D2m7","E2m","E2m7","F2maj7","A2m","A2m7","B2m7b5","C3major","C3maj7","D3m","D3m7","E3m","E3m7","F3maj7","A3m","A3m7","B3m7b5"],this.instrument=void 0,this.automata=void 0,this.offset=0,this.chordsDistance=8,this.voicesDistance=4,this.noteDistance=1,this.step=0,this.instrument=e,this.automata=i,this.offset=s}return Object(m.a)(t,[{key:"play",value:function(){this.playNote(),this.playChord(),this.step++}},{key:"playNote",value:function(){var t=this.leeDistance(1)%(2*this.notes.length),e=t>=this.notes.length?this.notes.length-t%this.notes.length-1:t;if(this.note=this.notes[e%this.notes.length],this.step%this.noteDistance==0&&this.note!=this.lastNote){var i=b.a(this.note).transpose(this.offset).toFrequency();this.instrument.triggerAttackRelease(i,40,void 0,.15)}this.lastNote=this.note}},{key:"playVoice",value:function(){var t=this.leeDistance(2)%(2*this.voices.length),e=t>=this.voices.length?this.voices.length-t%this.voices.length-1:t;if(this.voice=this.voices[e%this.voices.length],this.step%this.voicesDistance==0&&3==this.automata.states&&this.voice!=this.lastVoice){var i=b.a(this.voice).transpose(this.offset).toFrequency();this.instrument.triggerAttackRelease(i,40,void 0,.2)}this.lastVoice=this.voice}},{key:"playChord",value:function(){var t=this,e=this.leeDistance(0)%(2*this.chords.length),i=e>=this.chords.length?this.chords.length-e%this.chords.length-1:e,s=this.chords[i%this.chords.length];if(this.step%this.chordsDistance==0){var a=g.a.get(s).notes.map((function(e){return b.a(e).transpose(t.offset).toFrequency()}));this.instrument.triggerAttackRelease(a,40,void 0,.1)}}},{key:"leeDistance",value:function(t){var e=this;return this.automata.state.reduce((function(i,s,a){var n=Math.abs(e.automata.state[a]-e.automata.previousState[a]),r=Math.min(n,e.automata.states-n);return e.automata.state[a]!=t?i:i+r}),0)}},{key:"stop",value:function(){this.instrument.releaseAll(),this.instrument.dispose(),this.note="",this.lastNote="",this.step=0}}]),t}();A.Builder=function(){function t(){Object(f.a)(this,t),this.automata=void 0,this.offset=0}return Object(m.a)(t,[{key:"withAutomata",value:function(t){return this.automata=t,this}},{key:"withOffset",value:function(t){return this.offset=t,this}},{key:"build",value:function(){var t=Object(o.a)(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==this.automata){t.next=2;break}throw new Error("Must pass a cellular automata upon building");case 2:return e=new b.b({urls:{C4:"fart-c.mp3",D4:"fart-d.mp3",E4:"fart-e.mp3",F4:"fart-f.mp3",G4:"caca.mp3",A4:"fart-a.mp3",B4:"pedo.mp3"},baseUrl:"/human-music/sounds/"}).toDestination(),t.next=5,b.c();case 5:return t.abrupt("return",new A(e,this.automata,this.offset));case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}();var k,S,w,E=i(18),y=i.n(E),j=i(46),C=i(6),O=function(t){t.setup=function(){t.createCanvas(y()("#sketch").width(),y()("#sketch").height()),t.background(9,9,9),t.frameRate(2.5)},t.updateWithProps=function(e){t.resizeCanvas(y()("#sketch").width(),y()("#sketch").height()),e.newAutomata&&(t.clear(),t.background(9,9,9),function(t,e){I.apply(this,arguments)}(t,e.newAutomata))},t.draw=function(){var t,e,i;null===(t=S)||void 0===t||t.draw(),null===(e=k)||void 0===e||e.evolve(),null===(i=w)||void 0===i||i.play()}};function I(){return(I=Object(o.a)(r.a.mark((function t(e,i){var s,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.noLoop(),null===(s=w)||void 0===s||s.stop(),k=null,S=null,w=null,k=i,a=Math.floor(6*Math.random()),S=(new p.Builder).withSketch(e).withAutomata(i).withOffset(a).build(),t.next=10,(new A.Builder).withAutomata(k).withOffset(a).build();case 10:w=t.sent,e.loop();case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function z(){var t=Object(u.useReducer)((function(t){return t+1}),0),e=Object(h.a)(t,2),i=e[0],s=e[1];return l.a.useEffect((function(){var t=Object(j.a)((function(){s()}),200),e=function(){t()};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(C.jsx)(c.Consumer,{children:function(t){return Object(C.jsx)("div",{className:"CellularAutomataSketch",id:"sketch",children:Object(C.jsx)(d.a,{customClass:"canvas",sketch:O,newAutomata:t,ignored:i})})}})}i(91);var M=i.p+"static/media/github.41bf9875.png",N=function(){function t(e,i,s,a,n,r){Object(f.a)(this,t),this.states=void 0,this.size=void 0,this.radius=void 0,this.rule=void 0,this._state=void 0,this.tempState=void 0,this.neighbourhoodCode=void 0,this.lookupTable=void 0,this.states=e,this.size=i,this.radius=s,this.rule=a,this._state=n,this.lookupTable=r,this.tempState=Array.from({length:i}),this.neighbourhoodCode=Array.from({length:i})}return Object(m.a)(t,[{key:"state",get:function(){return this._state}},{key:"previousState",get:function(){return this.tempState}},{key:"evolve",value:function(){var t=this;this.state.forEach((function(e,i){t.evolveCellAt(i)}));var e=this.tempState;this.tempState=this._state,this._state=e}},{key:"evolveCellAt",value:function(t){var e=this.lookupTable.length-this.computeCodeFor(t)-1;this.tempState[t]=e>=0?this.lookupTable[e]:0}},{key:"computeCodeFor",value:function(t){var e,i=Math.pow(this.states,2*this.radius),s=0;if(0===t)for(var a=-this.radius;a<=this.radius;a++)e=this.wrappedIndex(a),s+=i*this._state[e],i/=this.states;else{e=this.wrappedIndex(t-this.radius-1);var n=i*this._state[e];e=this.wrappedIndex(t+this.radius);var r=this._state[e];s=(this.neighbourhoodCode[t-1]-n)*this.states+r}return this.neighbourhoodCode[t]=s,s}},{key:"wrappedIndex",value:function(t){return t<0?t+this.size:t>=this.size?t-this.size:t}}]),t}();N.Builder=function(){function t(){Object(f.a)(this,t),this.states=2,this.size=100,this.rule=0,this.randomInitialConfiguration=!1}return Object(m.a)(t,[{key:"withStates",value:function(t){if(t<1)throw new Error("Number of states must be greater than 1");return this.states=t,this}},{key:"withSize",value:function(t){if(this.size=t,t<=10)throw new Error("Size of cellular automata must be greater than 10");return this}},{key:"withRule",value:function(t){if(this.rule=t,t<0)throw new Error("Rule must be a positive number");return this}},{key:"withRandomInitialConfiguration",value:function(){return this.randomInitialConfiguration=!0,this}},{key:"build",value:function(){for(var t=this,e=Array.from(BigInt(this.rule).toString(this.states)),i=Array.from({length:e.length}),s=0;s<e.length;s++){var a=e[s];i[s]=a>="0"&&a<="9"?+e[s]-0:+e[s]-NaN}var n=this.randomInitialConfiguration?Array.from({length:this.size},(function(){return Math.round(Math.random())})):Array.from({length:this.size},(function(e,i){return i===Math.floor(t.size/2)?1:0}));return new N(this.states,this.size,1,this.rule,n,i)}}]),t}();var B,R,L,T=function(){function t(e,i,s,a,n,r){Object(f.a)(this,t),this.states=void 0,this.size=void 0,this.radius=void 0,this.rule=void 0,this._state=void 0,this.tempState=void 0,this.neighbourhoodCode=void 0,this.lookupTable=void 0,this.states=e,this.size=i,this.radius=s,this.rule=a,this._state=n,this.lookupTable=r,this.tempState=Array.from({length:i}),this.neighbourhoodCode=Array.from({length:i})}return Object(m.a)(t,[{key:"state",get:function(){return this._state}},{key:"previousState",get:function(){return this.tempState}},{key:"evolve",value:function(){var t=this;this.state.forEach((function(e,i){t.evolveCellAt(i)}));var e=this.tempState;this.tempState=this._state,this._state=e}},{key:"evolveCellAt",value:function(t){var e=this.lookupTable.length-this.computeCodeFor(t)-1;this.tempState[t]=e>=0?this.lookupTable[e]:0}},{key:"computeCodeFor",value:function(t){var e,i=2*this.radius+1,s=0;if(0===t)for(var a=-this.radius;a<i;a++)e=this.wrappedIndex(a),s+=this._state[e];else{e=this.wrappedIndex(t-this.radius-1);var n=this._state[e];e=this.wrappedIndex(t+this.radius);var r=this._state[e];s=this.neighbourhoodCode[t-1]-n+r}return this.neighbourhoodCode[t]=s,s}},{key:"wrappedIndex",value:function(t){return t<0?t+this.size:t>=this.size?t-this.size:t}}]),t}();!function(t){t[t.UNIDIMENSIONAL=0]="UNIDIMENSIONAL",t[t.BIDIMENSIONAL=1]="BIDIMENSIONAL"}(B||(B={})),function(t){t[t.TOTALISTIC=0]="TOTALISTIC",t[t.ELEMENTARY=1]="ELEMENTARY"}(R||(R={})),function(t){t[t.EXTRA_SMALL=0]="EXTRA_SMALL",t[t.SMALL=1]="SMALL",t[t.MEDIUM=2]="MEDIUM",t[t.LARGE=3]="LARGE",t[t.EXTRA_LARGE=4]="EXTRA_LARGE"}(L||(L={}));var x=function t(){Object(f.a)(this,t)};x.Builder=function(){function t(){Object(f.a)(this,t),this.dimensions=B.UNIDIMENSIONAL,this.type=R.ELEMENTARY,this.states=2,this.size=100,this.rule=0,this.randomInitialConfiguration=!1}return Object(m.a)(t,[{key:"withDimensions",value:function(t){if(t===B.BIDIMENSIONAL)throw new Error("Bi-dimensional automata not implemented yet");return this.dimensions=t,this}},{key:"withType",value:function(t){return this.type=t,this}},{key:"withStates",value:function(t){if(t<1)throw new Error("Number of states must be greater than 1");return this.states=t,this}},{key:"withSize",value:function(t){var e=document.getElementById("sketch"),i=null===e?0:e.clientWidth;switch(t){case L.EXTRA_SMALL:this.size=i/30;break;case L.SMALL:this.size=i/15;break;case L.MEDIUM:this.size=i/5;break;case L.LARGE:this.size=i/2;break;case L.EXTRA_LARGE:this.size=i/1}return this.size=151,this}},{key:"withRule",value:function(t){if(this.rule=t,t<0)throw new Error("Rule must be a positive number");return this}},{key:"withRandomInitialConfiguration",value:function(){return this.randomInitialConfiguration=!0,this}},{key:"build",value:function(){return this.type===R.TOTALISTIC?this.buildTotallistic1D():this.buildElementary1D()}},{key:"buildTotallistic1D",value:function(){for(var t=this,e=Array.from(BigInt(this.rule).toString(this.states)),i=Array.from({length:e.length}),s=0;s<e.length;s++)i[s]=+e[s]-0;var a=this.randomInitialConfiguration?Array.from({length:this.size},(function(){return Math.round(Math.random())})):Array.from({length:this.size},(function(e,i){return i===Math.floor(t.size/2)?1:0}));return new T(this.states,this.size,1,this.rule,a,i)}},{key:"buildElementary1D",value:function(){for(var t=this,e=Array.from(BigInt(this.rule).toString(this.states)),i=Array.from({length:e.length}),s=0;s<e.length;s++){var a=e[s];i[s]=a>="0"&&a<="9"?+e[s]-0:+e[s]-NaN}var n=this.randomInitialConfiguration?Array.from({length:this.size},(function(){return Math.round(Math.random())})):Array.from({length:this.size},(function(e,i){return i===Math.floor(t.size/2)?1:0}));return new N(this.states,this.size,1,this.rule,n,i)}}]),t}();var D=function(){function t(){Object(f.a)(this,t)}return Object(m.a)(t,[{key:"randomAutomata",value:function(){var t=Math.random()<.5?R.ELEMENTARY:R.TOTALISTIC,e=1+Math.ceil(2*Math.random()),i=0;switch(t){case R.ELEMENTARY:i=Math.pow(e,Math.pow(e,3))-1;break;case R.TOTALISTIC:i=Math.pow(e,3*e)-1}for(;;){for(var s=Math.round(Math.random()*i),a=(new x.Builder).withSize(L.LARGE).withStates(e).withType(t).withDimensions(B.UNIDIMENSIONAL).withRule(s).build(),n=new Set,r=0;r<100;r++)n.add(this.leeDistance(a)),a.evolve();if(n.size>=15)return(new x.Builder).withSize(L.LARGE).withStates(e).withType(t).withDimensions(B.UNIDIMENSIONAL).withRule(s).build()}}},{key:"leeDistance",value:function(t){return t.state.reduce((function(e,i,s){var a=Math.abs(t.state[s]-t.previousState[s]),n=Math.min(a,t.states-a);return 0==t.state[s]?e:e+n}),0)}}]),t}();function U(){var t=Object(u.useState)(!1),e=Object(h.a)(t,2),i=e[0],s=e[1],a=Object(u.useState)(null),n=Object(h.a)(a,2),l=n[0],d=n[1],f=new D;function m(){return(m=Object(o.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.d();case 2:s(!0),v();case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){return p.apply(this,arguments)}function p(){return p=Object(o.a)(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=f.randomAutomata(),d(e);case 2:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}return Object(C.jsxs)(c.Provider,{value:l,children:[Object(C.jsx)("meta",{name:"viewport",content:"width=device-width, height=device-height, initial-scale=1.0, viewport-fit=cover"}),Object(C.jsxs)("body",{className:"HumanMusic",children:[Object(C.jsxs)("div",{className:"Headers",children:[Object(C.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKoAAACgCAYAAACc7ffkAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADWUlEQVR4nO3dMYtUZxiG4ZkgFiGQxSplSrvF9JY26UVIof/AytofkSZptRBCehEsrdIk2KUMpEklKxoDNqZIG8k77JmcuWeuq/6YM+zefM3D2d1u1vNhxWdPbFd6rp/Lv/hkjYfCroRKglBJECoJQiVBqCQIlQShkiBUEvaxMoyWlQ+//LiHRy9ne+P2+OjwnJ/LJbhRSRAqCUIlQagkCJUEoZIgVBKESoJQSdhlPTiKZWXq9dt3o3NnN++Nzl28eDQ69/lnn47OHbqlFyw3KglCJUGoJAiVBKGSIFQShEqCUEkQKgnbzYktTlPTZWppx7JMLb3suVFJECoJQiVBqCQIlQShkiBUEoRKglBJuLL2F6j79snT0bn733y952/y/5guTm/+/GvR57pRSRAqCUIlQagkCJUEoZIgVBKESoJQSbBMfcT03aWH3/0wOncsy9Ra3KgkCJUEoZIgVBKESoJQSRAqCUIlQagkWKY+Yvpu0OP357MP/OkSX+YSlv6rhNN3oV69frvoc92oJAiVBKGSIFQShEqCUEkQKglCJUGoJFzZ/PO/pv7T9sbto/h/VGv9/6iptb7f0ovT+Z0H00eP+nOjkiBUEoRKglBJECoJQiVBqCQIlQShkjBaBXY0WrAuXjzaw6OXc3bz3ujc9J2pu1dfjs79/uz70bmlrbU4TblRSRAqCUIlQagkCJUEoZIgVBKESoJQSdjHMjU1WrDWMv4rfQubLlgrWqUZNyoJQiVBqCQIlQShkiBUEoRKglBJECoJay5Tq3j8/ny0iF3bXB993s/P/xid++rWF6Nzrza/js7dvfrypH53blQShEqCUEkQKglCJUGoJAiVBKGSIFQSjmbdmC5Ovz0/G33edEmami5O00Xs1BYsNyoJQiVBqCQIlQShkiBUEoRKglBJECoJB79aTBentUyXri9vXYzOLb1MTR36guVGJUGoJAiVBKGSIFQShEqCUEkQKglCJeGg14hdLP1X+pZ+x2lp3pmCAyRUEoRKglBJECoJQiVBqCQIlQShknAUq8Uu1lqwln636lgWpyk3KglCJUGoJAiVBKGSIFQShEqCUEkQKgkntW7sYrpgTReipT/v1LhRSRAqCUIlQagkCJUEoZIgVBKESoJQSfgbOcaPStU5NGkAAAAASUVORK5CYII=",className:"EarthRadioLogo",alt:"Earth"}),Object(C.jsx)("h1",{className:"Title",children:"Los Pedos"}),Object(C.jsx)("h2",{className:"Subtitle",children:"de Bruno"})]}),Object(C.jsxs)("div",{className:"Automata",children:[Object(C.jsx)("div",{className:"flip-card",children:Object(C.jsxs)("div",{className:"flip-card-inner",children:[Object(C.jsx)("div",{className:"flip-card-front",children:Object(C.jsx)(z,{})}),Object(C.jsx)("div",{className:"flip-card-back",children:Object(C.jsx)("p",{className:"PlayingRule",children:i?"Playing rule: "+(null===l||void 0===l?void 0:l.rule):"--"})})]})}),Object(C.jsx)("div",{className:"Controllers",children:i?Object(C.jsx)("button",{className:"ruleButton",onClick:v,children:"Randomise"}):Object(C.jsx)("button",{className:"startButton",onClick:function(){return m.apply(this,arguments)},children:"Start"})})]}),Object(C.jsxs)("div",{className:"Misc",children:[Object(C.jsx)("a",{className:"GitHubLink",href:"https://github.com/juankysoriano/human-music",children:Object(C.jsx)("img",{className:"GitHubLogo",alt:"GitHub",src:M})}),Object(C.jsx)("p",{className:"Dad",children:"A mi padre \u2665"})]})]})]})}i(92);a.a.render(Object(C.jsx)(U,{}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.1836879c.chunk.js.map
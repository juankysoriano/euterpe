(this.webpackJsonpeuterpe=this.webpackJsonpeuterpe||[]).push([[0],{69:function(t,e){},74:function(t,e,i){},84:function(t,e,i){},85:function(t,e,i){},86:function(t,e,i){"use strict";i.r(e);var s=i(36),r=i.n(s),n=i(2),a=i.n(n),h=i(3),o=i(4),u=i(5),l=i.n(u),c=i(1),d=i(0),f=function(){function t(e,i,s,r,n,a){Object(d.a)(this,t),this.states=void 0,this.size=void 0,this.radius=void 0,this.rule=void 0,this._state=void 0,this.tempState=void 0,this.neighbourhoodCode=void 0,this.lookupTable=void 0,this.states=e,this.size=i,this.radius=s,this.rule=r,this._state=n,this.lookupTable=a,this.tempState=Array.from({length:i}),this.neighbourhoodCode=Array.from({length:i})}return Object(c.a)(t,[{key:"state",get:function(){return this._state}},{key:"evolve",value:function(){var t=this;this.state.forEach((function(e,i){t.evolveCellAt(i)}));var e=this.tempState;this.tempState=this._state,this._state=e}},{key:"evolveCellAt",value:function(t){var e=this.lookupTable.length-this.computeCodeFor(t)-1;this.tempState[t]=e>=0?this.lookupTable[e]:0}},{key:"computeCodeFor",value:function(t){var e,i=Math.pow(this.states,2*this.radius),s=0;if(0===t)for(var r=-this.radius;r<=this.radius;r++)e=this.wrappedIndex(r),s+=i*this._state[e],i/=this.states;else{e=this.wrappedIndex(t-this.radius-1);var n=i*this._state[e];e=this.wrappedIndex(t+this.radius);var a=this._state[e];s=(this.neighbourhoodCode[t-1]-n)*this.states+a}return this.neighbourhoodCode[t]=s,s}},{key:"wrappedIndex",value:function(t){return t<0?t+this.size:t>=this.size?t-this.size:t}}]),t}();f.Builder=function(){function t(){Object(d.a)(this,t),this.states=2,this.size=100,this.rule=0,this.randomInitialConfiguration=!1}return Object(c.a)(t,[{key:"withStates",value:function(t){if(t<1)throw new Error("Number of states must be greater than 1");return this.states=t,this}},{key:"withSize",value:function(t){if(this.size=t,t<=10)throw new Error("Size of cellular automata must be greater than 10");return this}},{key:"withRule",value:function(t){if(this.rule=t,t<0)throw new Error("Rule must be a positive number");return this}},{key:"withRandomInitialConfiguration",value:function(){return this.randomInitialConfiguration=!0,this}},{key:"build",value:function(){for(var t=this,e=Array.from(BigInt(this.rule).toString(this.states)),i=Array.from({length:e.length}),s=0;s<e.length;s++){var r=e[s];i[s]=r>="0"&&r<="9"?+e[s]-0:+e[s]-NaN}var n=this.randomInitialConfiguration?Array.from({length:this.size},(function(){return Math.round(Math.random())})):Array.from({length:this.size},(function(e,i){return i===Math.floor(t.size/2)?1:0}));return new f(this.states,this.size,1,this.rule,n,i)}}]),t}();var v,m,p=function(){function t(e,i,s,r,n,a){Object(d.a)(this,t),this.states=void 0,this.size=void 0,this.radius=void 0,this.rule=void 0,this._state=void 0,this.tempState=void 0,this.neighbourhoodCode=void 0,this.lookupTable=void 0,this.states=e,this.size=i,this.radius=s,this.rule=r,this._state=n,this.lookupTable=a,this.tempState=Array.from({length:i}),this.neighbourhoodCode=Array.from({length:i})}return Object(c.a)(t,[{key:"state",get:function(){return this._state}},{key:"evolve",value:function(){var t=this;this.state.forEach((function(e,i){t.evolveCellAt(i)}));var e=this.tempState;this.tempState=this._state,this._state=e}},{key:"evolveCellAt",value:function(t){var e=this.lookupTable.length-this.computeCodeFor(t)-1;this.tempState[t]=e>=0?this.lookupTable[e]:0}},{key:"computeCodeFor",value:function(t){var e,i=2*this.radius+1,s=0;if(0===t)for(var r=-this.radius;r<i;r++)e=this.wrappedIndex(r),s+=this._state[e];else{e=this.wrappedIndex(t-this.radius-1);var n=this._state[e];e=this.wrappedIndex(t+this.radius);var a=this._state[e];s=this.neighbourhoodCode[t-1]-n+a}return this.neighbourhoodCode[t]=s,s}},{key:"wrappedIndex",value:function(t){return t<0?t+this.size:t>=this.size?t-this.size:t}}]),t}(),b=function(){function t(e,i){Object(d.a)(this,t),this.step=0,this.cellSize=void 0,this.sketch=void 0,this.automata=void 0,this.sketch=e,this.automata=i,this.cellSize=e.width/i.size}return Object(c.a)(t,[{key:"setup",value:function(){this.sketch.noStroke()}},{key:"draw",value:function(){for(var t=0;t<this.automata.size;t++)this.setFillColor(this.automata.state[t]),this.sketch.rect(this.cellSize*t,this.step*this.cellSize,this.cellSize,this.cellSize);this.step++}},{key:"setFillColor",value:function(t){0===t?this.sketch.fill("#000000"):1===t?this.sketch.fill("#F36E44"):2===t&&this.sketch.fill("#568140")}}]),t}();b.Builder=function(){function t(){Object(d.a)(this,t),this.sketch=void 0,this.automata=void 0}return Object(c.a)(t,[{key:"withSketch",value:function(t){return this.sketch=t,this}},{key:"withAutomata",value:function(t){return this.automata=t,this}},{key:"build",value:function(){if(null===this.automata)throw new Error("Must pass a cellular automata upon building");if(null===this.sketch)throw new Error("Must pass a p5 sketch upon building");return new b(this.sketch,this.automata)}}]),t}(),function(t){t[t.UNIDIMENSIONAL=0]="UNIDIMENSIONAL",t[t.BIDIMENSIONAL=1]="BIDIMENSIONAL"}(v||(v={})),function(t){t[t.TOTALISTIC=0]="TOTALISTIC",t[t.ELEMENTARY=1]="ELEMENTARY"}(m||(m={}));var w=function t(){Object(d.a)(this,t)};w.Builder=function(){function t(){Object(d.a)(this,t),this.dimensions=v.UNIDIMENSIONAL,this.type=m.ELEMENTARY,this.states=2,this.size=100,this.rule=0,this.randomInitialConfiguration=!1}return Object(c.a)(t,[{key:"withDimensions",value:function(t){if(t===v.BIDIMENSIONAL)throw new Error("Bi-dimensional automata not implemented yet");return this.dimensions=t,this}},{key:"withType",value:function(t){return this.type=t,this}},{key:"withStates",value:function(t){if(t<1)throw new Error("Number of states must be greater than 1");return this.states=t,this}},{key:"withSize",value:function(t){if(this.size=t,t<=10)throw new Error("Size of cellular automata must be greater than 10");return this}},{key:"withRule",value:function(t){if(this.rule=t,t<0)throw new Error("Rule must be a positive number");return this}},{key:"withRandomInitialConfiguration",value:function(){return this.randomInitialConfiguration=!0,this}},{key:"build",value:function(){return this.type===m.TOTALISTIC?this.buildTotallistic1D():this.buildElementary1D()}},{key:"buildTotallistic1D",value:function(){for(var t=this,e=Array.from(BigInt(this.rule).toString(this.states)),i=Array.from({length:e.length}),s=0;s<e.length;s++)i[s]=+e[s]-0;var r=this.randomInitialConfiguration?Array.from({length:this.size},(function(){return Math.round(Math.random())})):Array.from({length:this.size},(function(e,i){return i===Math.floor(t.size/2)?1:0}));return new p(this.states,this.size,1,this.rule,r,i)}},{key:"buildElementary1D",value:function(){for(var t=this,e=Array.from(BigInt(this.rule).toString(this.states)),i=Array.from({length:e.length}),s=0;s<e.length;s++){var r=e[s];i[s]=r>="0"&&r<="9"?+e[s]-0:+e[s]-NaN}var n=this.randomInitialConfiguration?Array.from({length:this.size},(function(){return Math.round(Math.random())})):Array.from({length:this.size},(function(e,i){return i===Math.floor(t.size/2)?1:0}));return new f(this.states,this.size,1,this.rule,n,i)}}]),t}();var k=(new w.Builder).withDimensions(v.UNIDIMENSIONAL).withType(m.ELEMENTARY).withSize(100).withRule(0).withStates(2).build(),g=l.a.createContext(k),y=i(37),I=(i(74),i(11)),S=i(6),A=function(t){var e="R",i="R",s=["R","B2","C3","D3","E3","F3","G3","A3","B3","C4"],r=!1,n=new I.a({urls:{A1:"A1.mp3",A2:"A2.mp3"},baseUrl:"https://tonejs.github.io/audio/casio/"}).toDestination();I.b().then((function(){r=!0})),t.width=1e3,t.height=600;var a=k,h=(new b.Builder).withSketch(t).withAutomata(a).build();t.setup=function(){t.createCanvas(1e3,600),t.frameRate(5),h.setup()},t.updateWithProps=function(e){e.automata&&(t.clear(),a=e.automata,h=(new b.Builder).withSketch(t).withAutomata(a).build())},t.draw=function(){if(r){var t=a.state.filter((function(t){return 0!==t})).length;e!==(i=s[t%s.length])&&(n.triggerRelease(e,I.c()),"R"!==i&&n.triggerAttack(i,I.c())),e=i,h.draw(),a.evolve()}}};function j(){return Object(S.jsx)(g.Consumer,{children:function(t){return Object(S.jsx)("div",{className:"CellularAutomataSketch",children:Object(S.jsx)(y.a,{customClass:"canvas",sketch:A,automata:t})})}})}i(84);function O(){var t=Object(u.useState)(!1),e=Object(o.a)(t,2),i=e[0],s=e[1],r=Object(u.useState)(0),n=Object(o.a)(r,2),l=n[0],c=n[1],d=Object(u.useState)(k),f=Object(o.a)(d,2),p=f[0],b=f[1];function y(){return(y=Object(h.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.d();case 2:s(!0),A();case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){return O.apply(this,arguments)}function O(){return O=Object(h.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Math.round(255*Math.random()),c(e),b((new w.Builder).withDimensions(v.UNIDIMENSIONAL).withType(m.ELEMENTARY).withStates(2).withSize(100).withRule(e).build());case 3:case"end":return t.stop()}}),t)}))),O.apply(this,arguments)}return Object(S.jsx)(g.Provider,{value:p,children:Object(S.jsxs)("div",{className:"Euterpe",children:[Object(S.jsx)("h1",{className:"ruleHeader",children:i?"Playing rule:"+l:"Euterpe"}),Object(S.jsx)(j,{}),i?Object(S.jsx)("button",{className:"ruleButton",onClick:A,children:"Randomise Rule"}):Object(S.jsx)("button",{className:"startButton",onClick:function(){return y.apply(this,arguments)},children:"Start"})]})})}i(85);r.a.render(Object(S.jsx)(O,{}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.e1c0c06f.chunk.js.map
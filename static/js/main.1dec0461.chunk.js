(this.webpackJsonpeuterpe=this.webpackJsonpeuterpe||[]).push([[0],{67:function(t,e){},72:function(t,e,i){},83:function(t,e,i){},84:function(t,e,i){},85:function(t,e,i){"use strict";i.r(e);var s=i(35),a=i.n(s),n=i(3),r=i(4),h=i.n(r),u=i(0),o=i(1),l=function(){function t(e,i,s,a,n,r){Object(u.a)(this,t),this.states=void 0,this.size=void 0,this.radius=void 0,this.rule=void 0,this._state=void 0,this.tempState=void 0,this.neighbourhoodCode=void 0,this.lookupTable=void 0,this.states=e,this.size=i,this.radius=s,this.rule=a,this._state=n,this.lookupTable=r,this.tempState=Array.from({length:i}),this.neighbourhoodCode=Array.from({length:i})}return Object(o.a)(t,[{key:"state",get:function(){return this._state}},{key:"evolve",value:function(){var t=this;this.state.forEach((function(e,i){t.evolveCellAt(i)}));var e=this.tempState;this.tempState=this._state,this._state=e}},{key:"evolveCellAt",value:function(t){var e=this.lookupTable.length-this.computeCodeFor(t)-1;this.tempState[t]=e>=0?this.lookupTable[e]:0}},{key:"computeCodeFor",value:function(t){var e,i=Math.pow(this.states,2*this.radius),s=0;if(0===t)for(var a=-this.radius;a<=this.radius;a++)e=this.wrappedIndex(a),s+=i*this._state[e],i/=this.states;else{e=this.wrappedIndex(t-this.radius-1);var n=i*this._state[e];e=this.wrappedIndex(t+this.radius);var r=this._state[e];s=(this.neighbourhoodCode[t-1]-n)*this.states+r}return this.neighbourhoodCode[t]=s,s}},{key:"wrappedIndex",value:function(t){return t<0?t+this.size:t>=this.size?t-this.size:t}}]),t}();l.Builder=function(){function t(){Object(u.a)(this,t),this.states=2,this.size=100,this.rule=0,this.randomInitialConfiguration=!1}return Object(o.a)(t,[{key:"withStates",value:function(t){if(t<1)throw new Error("Number of states must be greater than 1");return this.states=t,this}},{key:"withSize",value:function(t){if(this.size=t,t<=10)throw new Error("Size of cellular automata must be greater than 10");return this}},{key:"withRule",value:function(t){if(this.rule=t,t<0)throw new Error("Rule must be a positive number");return this}},{key:"withRandomInitialConfiguration",value:function(){return this.randomInitialConfiguration=!0,this}},{key:"build",value:function(){for(var t=this,e=Array.from(BigInt(this.rule).toString(this.states)),i=Array.from({length:e.length}),s=0;s<e.length;s++){var a=e[s];i[s]=a>="0"&&a<="9"?+e[s]-0:+e[s]-NaN}var n=this.randomInitialConfiguration?Array.from({length:this.size},(function(){return Math.round(Math.random())})):Array.from({length:this.size},(function(e,i){return i===Math.floor(t.size/2)?1:0}));return new l(this.states,this.size,1,this.rule,n,i)}}]),t}();var c=(new l.Builder).withSize(100).withRule(2).withStates(2).build(),d=h.a.createContext(c),f=function(){function t(e,i){Object(u.a)(this,t),this.step=0,this.cellSize=void 0,this.sketch=void 0,this.automata=void 0,this.sketch=e,this.automata=i,this.cellSize=e.width/i.size}return Object(o.a)(t,[{key:"setup",value:function(){this.sketch.noStroke()}},{key:"draw",value:function(){for(var t=0;t<this.automata.size;t++)this.setFillColor(this.automata.state[t]),this.sketch.rect(this.cellSize*t,this.step*this.cellSize,this.cellSize,this.cellSize);this.step++}},{key:"setFillColor",value:function(t){0===t?this.sketch.fill("#000000"):1===t?this.sketch.fill("#F36E44"):2===t&&this.sketch.fill("#568140")}}]),t}();f.Builder=function(){function t(){Object(u.a)(this,t),this.sketch=void 0,this.automata=void 0}return Object(o.a)(t,[{key:"withSketch",value:function(t){return this.sketch=t,this}},{key:"withAutomata",value:function(t){return this.automata=t,this}},{key:"build",value:function(){if(null===this.automata)throw new Error("Must pass a cellular automata upon building");if(null===this.sketch)throw new Error("Must pass a p5 sketch upon building");return new f(this.sketch,this.automata)}}]),t}();var v=i(36),m=(i(72),i(10)),p=i(5),b=function(t){var e="R",i="R",s=["R","B2","C3","D3","E3","F3","G3","A3","B3","C4"],a=!1,n=new m.a({urls:{C4:"Giuseppe-C.mp3",D4:"Giuseppe-D.mp3",E4:"Giuseppe-E.mp3"},baseUrl:"./sounds/"}).toDestination();m.b().then((function(){a=!0})),t.width=1e3,t.height=600;var r=c,h=(new f.Builder).withSketch(t).withAutomata(r).build();t.setup=function(){t.createCanvas(1e3,600),t.frameRate(5),h.setup()},t.updateWithProps=function(e){e.automata&&(t.clear(),r=e.automata,h=(new f.Builder).withSketch(t).withAutomata(r).build())},t.draw=function(){if(a){var t=r.state.filter((function(t){return 0!==t})).length;e!==(i=s[t%s.length])&&("R"!==e&&n.triggerRelease(e,m.c()),"R"!==i&&n.triggerAttack(i,m.c())),e=i,h.draw(),r.evolve()}}};function w(){return Object(p.jsx)(d.Consumer,{children:function(t){return Object(p.jsx)("div",{className:"CellularAutomataSketch",children:Object(p.jsx)(v.a,{customClass:"canvas",sketch:b,automata:t})})}})}i(83);function k(){var t=!1,e=Object(r.useState)(2),i=Object(n.a)(e,2),s=i[0],a=i[1],h=Object(r.useState)(c),u=Object(n.a)(h,2),o=u[0],f=u[1];return Object(p.jsx)(d.Provider,{value:o,children:Object(p.jsxs)("div",{className:"Euterpe",children:[Object(p.jsxs)("h1",{className:"ruleHeader",children:["Playing rule: ",s]}),Object(p.jsx)(w,{}),Object(p.jsx)("button",{className:"ruleButton",onClick:function(){!function(e){t||(m.d(),t=!0),a(e),f((new l.Builder).withStates(2).withSize(100).withRule(e).build())}(Math.round(255*Math.random()))},children:"Randomise Rule"})]})})}i(84);a.a.render(Object(p.jsx)(k,{}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.1dec0461.chunk.js.map
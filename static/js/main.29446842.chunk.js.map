{"version":3,"sources":["sketch/SketchProvider.ts","performers/cellularAutomataPainter.ts","performers/cellularAutomataPlayer.ts","sketch/sketch.tsx","resources/images/github.png","cellular-automata/1d/elementaryCellularAutomata1D.ts","cellular-automata/1d/totalisticCellularAutomata1D.ts","cellular-automata/index.ts","human-music/automata-selector.tsx","human-music/human-music.tsx","resources/images/earth.png","index.tsx"],"names":["SketchProvider","React","createContext","colors","CellularAutomata1DPainter","sketch","automata","step","cellSize","this","width","size","i","noFill","stroke","state","lines","window","devicePixelRatio","line","Math","random","height","background","Builder","Error","VerticalTransformations","HorizontalTransformations","CellularAutomata1DPlayer","instrument","chordsOctave","voicesOctave","notesOctave","chordsDuration","voicesDuration","notesDuration","chords","progressionLength","progressionsToTransformation","note","lastNote","voice","lastVoice","currentChord","progressionChords","chordsTracker","progressionNotes","notesTracker","chordsToTransformation","playedChords","verticalTransformations","REFLECTION","TRANSPOSE_UP","TRANSPOSE_DOWN","ESCALE_UP","ESCALE_DOWN","NONE","horizontalTransformations","FASTER","SLOWER","upEscalations","playChord","playVoice","playNote","transformNotes","transformVoices","length","targetIndex","leeDistance","actualIndex","push","console","log","midiNotes","Chord","get","notes","map","Tone","transpose","toFrequency","triggerAttackRelease","undefined","midiNote","states","min","aliveDistance","reverse","chord","round","hammingDistance","max","reduce","acc","_","index","euclideanDistance","abs","previousState","aliveNow","filter","value","aliveBefore","releaseAll","dispose","a","urls","baseUrl","toDestination","floor","chordOctave","voiceOctave","noteOctave","notesDurations","voicesDurations","chordDuration","chordsDurations","progressionLengths","progressionsToTransformations","automataPainter","automataPlayer","p5","setup","createCanvas","$","frameRate","updateWithProps","props","resizeCanvas","newAutomata","clear","updateSketch","draw","evolve","play","noLoop","stop","withSketch","withAutomata","build","loop","CellularAutomataSketch","useReducer","x","ignored","forceUpdate","useEffect","debounced","debounce","handleResize","addEventListener","removeEventListener","Consumer","className","id","customClass","ElementaryCellularAutomata1D","radius","rule","initialState","lookupTable","_state","tempState","neighbourhoodCode","Array","from","forEach","evolveCellAt","stateSave","code","computeCodeFor","lookUpIndex","exponential","pow","wrappedIndex","offsetA","offsetB","randomInitialConfiguration","ruleCharacters","BigInt","toString","character","Dimensions","Type","Size","TotalisticCellularAutomata1D","numberOfInvolvedCells","CellularAutomata","dimensions","UNIDIMENSIONAL","type","ELEMENTARY","BIDIMENSIONAL","document","getElementById","sketchWidth","clientWidth","EXTRA_SMALL","SMALL","MEDIUM","LARGE","EXTRA_LARGE","TOTALISTIC","buildTotallistic1D","buildElementary1D","AutomataSelector","ceil","maxRule","withSize","withStates","withType","withRandomInitialConfiguration","withDimensions","withRule","leeValues","Set","add","HumanMusic","useState","started","setStarted","setAutomata","ruleSelector","randomiseAutomata","randomAutomata","Provider","name","content","src","alt","onClick","href","github","ReactDOM","render"],"mappings":"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","file":"static/js/main.29446842.chunk.js","sourcesContent":["import React from \"react\";\nimport { CellularAutomata, CellularAutomata1D, Dimensions, Size, Type } from \"../cellular-automata\";\n\nconst SketchProvider = React.createContext(null as unknown as CellularAutomata1D);\n\nexport default SketchProvider;","import p5 from 'p5';\nimport { CellularAutomata1D } from '../cellular-automata';\n\nconst colors = ['#09090935', '#fae2b735', '#a71c1c35'];\n\n\n\nexport class CellularAutomata1DPainter {\n    private step: number = 0;\n    private cellSize: number;\n    private sketch: p5;\n    private automata: CellularAutomata1D;\n\n    constructor(sketch: p5, automata: CellularAutomata1D) {\n        this.sketch = sketch;\n        this.automata = automata;\n        this.cellSize = this.sketch.width / automata.size;\n    }\n\n    draw() {\n        for (let i = 0; i < this.automata.size; i++) {\n            this.sketch.noFill();\n            this.sketch.stroke(colors[this.automata.state[i]]);\n            for (let lines = 0; lines < 25 / window.devicePixelRatio; lines++) {\n                this.sketch.line(\n                    this.cellSize * i + this.cellSize / 2 + (Math.random() * 2 * this.cellSize - this.cellSize),\n                    this.cellSize * this.step + this.cellSize / 2 + (Math.random() * 2 * this.cellSize - this.cellSize), \n                    this.cellSize * i + this.cellSize / 2 + (Math.random() * 2 * this.cellSize - this.cellSize), \n                    this.cellSize * this.step + this.cellSize / 2 + (Math.random() * 2 * this.cellSize - this.cellSize));\n            }\n        }\n\n        if (this.step * this.cellSize >= this.sketch.height) {\n            this.sketch.background(9, 9, 9, 235);\n            this.step = 0;\n        } else {\n            this.step++;\n        }\n    }\n\n    static Builder = class {\n        private sketch?: p5;\n        private automata?: CellularAutomata1D;\n\n        withSketch(sketch: p5) {\n            this.sketch = sketch;\n            return this;\n        }\n\n        withAutomata(automata: CellularAutomata1D) {\n            this.automata = automata;\n            return this;\n        }\n\n        build() {\n            if (this.automata === null) {\n                throw new Error(\"Must pass a cellular automata upon building\");\n            }\n            if (this.sketch === null) {\n                throw new Error(\"Must pass a p5 sketch upon building\");\n            }\n            return new CellularAutomata1DPainter(this.sketch!, this.automata!);\n        }\n    }\n}","import * as Tone from 'tone'\nimport { CellularAutomata1D } from \"../cellular-automata\";\nimport { Chord } from \"@tonaljs/tonal\";\n\nconst NOTE_DURATION = 5;\n\nenum VerticalTransformations {\n    REFLECTION,\n    TRANSPOSE_UP,\n    TRANSPOSE_DOWN,\n    ESCALE_UP,\n    ESCALE_DOWN,\n    NONE,\n}\n\nenum HorizontalTransformations {\n    FASTER,\n    SLOWER,\n    NONE\n}\n\nexport class CellularAutomata1DPlayer {\n    private note = 0;\n    private lastNote = 0;\n    private voice = 0;\n    private lastVoice = 0;\n    private currentChord = 0;\n    private chords = [\"\"];\n    private progressionChords = [] as number[]\n    private chordsTracker = 0;\n    private progressionNotes = [] as number[]\n    private notesTracker = 0;\n    private instrument: Tone.Sampler;\n    private automata: CellularAutomata1D;\n    private chordsDuration;\n    private voicesDuration;\n    private notesDuration;\n    private chordsOctave;\n    private voicesOctave;\n    private notesOctave;\n    private progressionLength;\n    private chordsToTransformation;\n    private step = 0;\n    private playedChords = 0;\n    private verticalTransformations = [\n        VerticalTransformations.REFLECTION,\n        VerticalTransformations.TRANSPOSE_UP,\n        VerticalTransformations.TRANSPOSE_DOWN,\n        VerticalTransformations.ESCALE_UP,\n        VerticalTransformations.ESCALE_DOWN,\n        VerticalTransformations.NONE\n    ]\n    private horizontalTransformations = [\n        HorizontalTransformations.FASTER,\n        HorizontalTransformations.SLOWER,\n        HorizontalTransformations.NONE\n    ]\n    private upEscalations = 0;\n\n    constructor(instrument: Tone.Sampler,\n        automata: CellularAutomata1D,\n        chordsOctave: number,\n        voicesOctave: number,\n        notesOctave: number,\n        chordsDuration: number,\n        voicesDuration: number,\n        notesDuration: number,\n        chords: string[],\n        progressionLength: number,\n        progressionsToTransformation: number\n    ) {\n        this.instrument = instrument;\n        this.automata = automata;\n        this.chordsOctave = chordsOctave;\n        this.voicesOctave = voicesOctave;\n        this.notesOctave = notesOctave;\n        this.chordsDuration = chordsDuration;\n        this.notesDuration = notesDuration;\n        this.voicesDuration = voicesDuration;\n        this.chords = chords;\n        this.progressionLength = progressionLength;\n        this.chordsToTransformation = progressionLength * progressionsToTransformation;\n    }\n\n    play() {\n        this.playChord();\n        this.playVoice();\n        this.playNote();\n\n        if (this.playedChords % this.chordsToTransformation == 0 && this.step % this.chordsDuration == 0) {\n            this.step = 0;\n            //this.transformChords();\n            this.transformNotes();\n            this.transformVoices();\n        }\n\n        this.step++;\n    }\n\n    private playChord() {\n        if (this.step % this.chordsDuration != 0) {\n            return;\n        }\n\n        if (this.progressionChords.length == this.progressionLength) {\n            this.currentChord = this.progressionChords[this.chordsTracker % this.progressionChords.length];\n            this.chordsTracker++;\n        } else {\n            let targetIndex = this.leeDistance(0) % (this.chords.length * 2);\n            let actualIndex = targetIndex >= this.chords.length ? this.chords.length - (targetIndex % this.chords.length) - 1 : targetIndex;\n            this.currentChord = actualIndex % this.chords.length;\n            this.progressionChords.push(this.currentChord);\n        }\n\n        console.log(this.chords[this.currentChord % this.chords.length])\n        let midiNotes = Chord.get(this.chords[this.currentChord % this.chords.length]).notes.map((note) => Tone.Frequency(note).transpose(this.chordsOctave * 12).toFrequency())\n        this.instrument.triggerAttackRelease(midiNotes, NOTE_DURATION, undefined, 0.15);\n        this.playedChords++;\n    }\n\n    private playVoice() {\n        if (this.leeDistance(1) == 0 || (this.step % this.voicesDuration) != 0) {\n            return;\n        }\n\n        let notes = Chord.get(this.chords[this.currentChord % this.chords.length]).notes;\n        let targetIndex = this.leeDistance(1) % (notes.length * 2);\n        let actualIndex = targetIndex >= notes.length ? notes.length - (targetIndex % notes.length) - 1 : targetIndex;\n        this.voice = actualIndex % notes.length;\n\n        if (this.voice != this.lastVoice) {\n            let midiNote = Tone.Frequency(notes[this.voice]).transpose(this.voicesOctave * 12).toFrequency();\n            this.instrument.triggerAttackRelease(midiNote, NOTE_DURATION, undefined, 0.4);\n            this.lastVoice = this.voice;\n        }\n\n    }\n\n    private playNote() {\n        let state = this.automata.states == 3 ? 2 : 0;\n        if (this.leeDistance(state) == 0 || this.step % this.notesDuration != 0) {\n            return;\n        }\n\n        if (this.progressionChords.length == this.progressionLength) {\n            this.note = this.progressionNotes[this.notesTracker % this.progressionNotes.length];\n            this.notesTracker++;\n        } else {\n            let notes = Chord.get(this.chords[this.currentChord % this.chords.length]).notes;\n            let targetIndex = this.leeDistance(state) % (notes.length * 2);\n            let actualIndex = targetIndex >= notes.length ? notes.length - (targetIndex % notes.length) - 1 : targetIndex;\n            this.note = actualIndex % notes.length;\n            this.progressionNotes.push(this.note);\n        }\n\n        if (this.note != this.lastNote) {\n            let notes = Chord.get(this.chords[this.currentChord % this.chords.length]).notes;\n            let midiNote = Tone.Frequency(notes[Math.min(this.note, notes.length - 1)]).transpose(this.notesOctave * 12).toFrequency();\n            this.instrument.triggerAttackRelease(midiNote, NOTE_DURATION, undefined, 0.2);\n            this.lastNote = this.note;\n        }\n    }\n\n    private transformChords() {\n        //let horizontalTransformation = this.horizontalTransformations[this.hammingDistance(0) % this.horizontalTransformations.length];\n        //switch (horizontalTransformation) {\n        //    case HorizontalTransformations.FASTER:\n        //        this.chordsDuration = Math.min(10, this.chordsDuration + 2);\n        //        break;\n        //    case HorizontalTransformations.SLOWER:\n        //        this.chordsDuration = Math.max(3, this.chordsDuration - 2);\n        //        break;\n        //    case HorizontalTransformations.NONE: break;\n        //}\n\n        let verticalTransformation = this.verticalTransformations[this.aliveDistance(0) % this.verticalTransformations.length];\n        switch (verticalTransformation) {\n            case VerticalTransformations.REFLECTION:\n                this.progressionChords = this.progressionChords.reverse();\n                break;\n            case VerticalTransformations.ESCALE_DOWN:\n                this.progressionChords = this.progressionChords.map((chord) =>\n                    this.upEscalations > 0 ? Math.round(chord / 2) : chord\n                );\n                this.upEscalations = Math.min(0, this.upEscalations - 1)\n                break;\n            case VerticalTransformations.ESCALE_UP:\n                this.progressionChords = this.progressionChords.map((chord) =>\n                    chord * 2\n                );\n                this.upEscalations++\n                break;\n            case VerticalTransformations.TRANSPOSE_DOWN:\n                this.progressionChords = this.progressionChords.map((chord) =>\n                    chord == 0 ? this.progressionChords.length - 1 : chord - 1\n                );\n                break;\n            case VerticalTransformations.TRANSPOSE_UP:\n                this.progressionChords = this.progressionChords.map((chord) =>\n                    chord + 1\n                );\n                break;\n            case VerticalTransformations.NONE: break;\n        }\n    }\n\n    private transformVoices() {\n        let horizontalTransformation = this.horizontalTransformations[this.hammingDistance(1) % this.horizontalTransformations.length];\n        switch (horizontalTransformation) {\n            case HorizontalTransformations.FASTER:\n                this.voicesDuration = Math.max(1, this.voicesDuration - 2);\n                break;\n            case HorizontalTransformations.SLOWER:\n                this.voicesDuration = Math.min(5, this.voicesDuration + 2);\n                break;\n            case HorizontalTransformations.NONE: break;\n        }\n    }\n\n    private transformNotes() {\n        let state = this.automata.states == 3 ? 2 : 0;\n        let horizontalTransformation = this.horizontalTransformations[this.hammingDistance(state) % this.horizontalTransformations.length];\n        switch (horizontalTransformation) {\n            case HorizontalTransformations.FASTER:\n                this.notesDuration = Math.max(2, this.notesDuration - 2);\n                break;\n            case HorizontalTransformations.SLOWER:\n                this.notesDuration = Math.min(6, this.notesDuration + 2);\n                break;\n            case HorizontalTransformations.NONE: break;\n        }\n    }\n\n    private leeDistance(state: number) {\n        return this.automata.state.reduce((acc, _, index) => {\n            let euclideanDistance = Math.abs(this.automata.state[index] - this.automata.previousState[index])\n            let leeDistance = Math.min(euclideanDistance, this.automata.states - euclideanDistance)\n            return this.automata.state[index] != state ? acc : acc + leeDistance;\n        }, 0);\n    }\n\n    private hammingDistance(state: number) {\n        return this.automata.state.reduce((acc, _, index) => {\n            return this.automata.state[index] != state || this.automata.state[index] == this.automata.previousState[index] ? acc : acc + 1;\n        }, 0);\n    }\n\n    private aliveDistance(state: number) {\n        let aliveNow = this.automata.state.filter(value => value == state).length;\n        let aliveBefore = this.automata.previousState.filter(value => value == state).length;\n\n        return Math.abs(aliveNow - aliveBefore);\n    }\n\n    stop() {\n        this.instrument.releaseAll();\n        this.instrument.dispose();\n        this.note = 0;\n        this.lastNote = 0;\n        this.step = 0;\n        this.notesTracker = 0;\n        this.chordsTracker = 0;\n        this.playedChords = 0;\n    }\n\n    static Builder = class {\n        private automata?: CellularAutomata1D;\n        private chords = [\n            [\"C0major\", \"D0m\", \"E0m\", \"F0major\", \"G0major\", \"A0m\", \"C0maj7\", \"D0m7\", \"E0m7\", \"F0maj7\", \"G0maj7\", \"A0m7\"],\n            [\"D0major\", \"E0m\", \"F#0m\", \"G0major\", \"A0major\", \"B0m\", \"D0maj7\", \"E0m7\", \"F#0m7\", \"G0maj7\", \"A0maj7\", \"B0m7\"],\n            [\"E0major\", \"F#0m\", \"G#0m\", \"A0major\", \"B0major\", \"C#1m\", \"E0maj7\", \"F#0m7\", \"G#0m7\", \"A0maj7\", \"B0maj7\", \"C#1m7\"],\n            [\"F#0major\", \"G#0m\", \"A#0m\", \"B0major\", \"C#1major\", \"Eb1m\", \"F#0maj7\", \"G#0m7\", \"A#0m7\", \"B0maj7\", \"C#1maj7\"],\n            [\"G0major\", \"C0major\", \"D0major\", \"A0m\", \"E0m\", \"B0m\", \"G0maj7\", \"C0maj7\", \"D0maj7\", \"A0m7\", \"E0m7\", \"B0m7\"],\n            [\"A0major\", \"C#1m\", \"D1major\", \"E1major\", \"F#1m\", \"B1m\", \"A0maj7\", \"C#1m7\", \"D1maj7\", \"E1major7\", \"F#1m7\"],\n            [\"B0major\", \"C#1m\", \"D#1m\", \"E1major\", \"F#1major\", \"G#1m\", \"B0maj7\", \"C#1m7\", \"D#1m7\", \"E1maj7\", \"F#1maj7\", \"G#1m7\"],\n        ];\n\n        withAutomata(automata: CellularAutomata1D) {\n            this.automata = automata;\n            return this;\n        }\n\n        async build() {\n            if (this.automata === null) {\n                throw new Error(\"Must pass a cellular automata upon building\");\n            }\n            const instrument = new Tone.Sampler({\n                urls: {\n                    \"C1\": \"C1.mp3\",\n                    \"D#1\": \"Ds1.mp3\",\n                    \"F#1\": \"Fs1.mp3\",\n                    \"A1\": \"A1.mp3\",\n                    \"C2\": \"C2.mp3\",\n                    \"D#2\": \"Ds2.mp3\",\n                    \"F#2\": \"Fs2.mp3\",\n                    \"A2\": \"A2.mp3\",\n                    \"C3\": \"C3.mp3\",\n                    \"D#3\": \"Ds3.mp3\",\n                    \"F#3\": \"Fs3.mp3\",\n                    \"A3\": \"A3.mp3\",\n                    \"C4\": \"C4.mp3\",\n                    \"D#4\": \"Ds4.mp3\",\n                    \"F#4\": \"Fs4.mp3\",\n                    \"A4\": \"A4.mp3\",\n                    \"C5\": \"C5.mp3\",\n                    \"D#5\": \"Ds5.mp3\",\n                    \"F#5\": \"Fs5.mp3\",\n                    \"A5\": \"A5.mp3\",\n                },\n                baseUrl: \"https://tonejs.github.io/audio/salamander/\",\n            }).toDestination();\n\n            await Tone.loaded();\n\n            let chord = this.chords[Math.floor(Math.random() * this.chords.length)];\n            let chordOctave = Math.round(Math.random() * 2) + 2;\n            let voiceOctave = Math.round(Math.random()) + 3;\n            let noteOctave = Math.round(Math.random()) + 3;\n\n            let chordsDurations = [3, 4, 6, 8, 10];\n            let notesDurations = [2, 3, 4, 5, 6];\n            let voicesDurations = [1, 2, 3, 4, 5];\n\n            let chordDuration = chordsDurations[Math.floor(Math.random() * chordsDurations.length)]\n            let voicesDuration = voicesDurations[Math.floor(Math.random() * voicesDurations.length)]\n            let notesDuration = notesDurations[Math.floor(Math.random() * notesDurations.length)]\n\n            let progressionLengths = [2, 3, 4];\n            let progressionLength = progressionLengths[Math.floor(Math.random() * progressionLengths.length)];\n\n            let progressionsToTransformations = [1];\n            let progressionsToTransformation = progressionsToTransformations[Math.floor(Math.random() * progressionsToTransformations.length)];\n\n            return new CellularAutomata1DPlayer(\n                instrument,\n                this.automata!,\n                chordOctave,\n                voiceOctave,\n                noteOctave,\n                chordDuration,\n                voicesDuration,\n                notesDuration,\n                chord,\n                progressionLength,\n                progressionsToTransformation\n            );\n        }\n    }\n}","import { P5Instance, ReactP5Wrapper, Sketch } from \"react-p5-wrapper\";\nimport SketchProvider from './SketchProvider';\nimport { CellularAutomata, CellularAutomata1D, Dimensions, Size, Type } from '../cellular-automata';\nimport { CellularAutomata1DPainter } from \"../performers/cellularAutomataPainter\";\nimport { CellularAutomata1DPlayer } from \"../performers/cellularAutomataPlayer\";\nimport $ from 'jquery';\nimport React, { useReducer } from \"react\";\nimport { debounce } from \"ts-debounce\";\n\nlet automata: CellularAutomata1D;\nlet automataPainter: CellularAutomata1DPainter;\nlet automataPlayer: CellularAutomata1DPlayer;\n\nconst sketch: Sketch = p5 => {\n  p5.setup = () => {\n    p5.createCanvas($('#sketch').width()!, $('#sketch').height()!);\n    p5.background(9, 9, 9);\n    p5.frameRate(3);\n  };\n\n  p5.updateWithProps = props => {\n    p5.resizeCanvas($('#sketch').width()!, $('#sketch').height()!);\n    if (props.newAutomata) {\n      p5.clear();\n      p5.background(9, 9, 9);\n      updateSketch(p5, props.newAutomata);\n    }\n  }\n\n  p5.draw = () => {\n    automataPainter?.draw();\n    automata?.evolve();\n    automataPlayer?.play();\n  }\n}\n\nasync function updateSketch(p5: P5Instance, newAutomata: CellularAutomata1D) {\n  p5.noLoop();\n  automataPlayer?.stop();\n  automata = null as any;\n  automataPainter = null as any;\n  automataPlayer = null as any;\n\n  automata = newAutomata;\n\n  let offset = Math.floor(Math.random() * 6);\n\n  automataPainter = new CellularAutomata1DPainter.Builder()\n    .withSketch(p5)\n    .withAutomata(newAutomata)\n    .build();\n\n  automataPlayer = await new CellularAutomata1DPlayer.Builder()\n    .withAutomata(automata)\n    .build();\n\n  p5.loop();\n}\n\nexport default function CellularAutomataSketch() {\n  const [ignored, forceUpdate] = useReducer(x => x + 1, 0);\n\n  React.useEffect(() => {\n    const debounced = debounce(() => { forceUpdate(); }, 200);\n    const handleResize = function () { debounced(); }\n    window.addEventListener('resize', handleResize);\n\n    return (() => window.removeEventListener('resize', handleResize))\n  }, [])\n\n  return (<SketchProvider.Consumer>\n    {newAutomata => (\n      <div className=\"CellularAutomataSketch\" id=\"sketch\">\n        <ReactP5Wrapper customClass=\"canvas\"\n          sketch={sketch}\n          newAutomata={newAutomata}\n          ignored={ignored} />\n      </div>\n    )}\n  </SketchProvider.Consumer>);\n}\n\n","export default __webpack_public_path__ + \"static/media/github.41bf9875.png\";","import { CellularAutomata1D } from './cellularAutomata1D';\n\nexport class ElementaryCellularAutomata1D implements CellularAutomata1D {\n    readonly states: number;\n    readonly size: number;\n    readonly radius: number;\n    readonly rule: number;\n    private _state: number[];\n    private tempState: number[];\n    private neighbourhoodCode: number[];\n    private lookupTable: number[];\n\n    constructor(states: number, size: number, radius: number, rule: number, initialState: number[], lookupTable: number[]) {\n        this.states = states;\n        this.size = size;\n        this.radius = radius;\n        this.rule = rule;\n        this._state = initialState;\n        this.lookupTable = lookupTable;\n        this.tempState = Array.from({ length: size });\n        this.neighbourhoodCode = Array.from({ length: size });\n    }\n\n    get state(): readonly number[] {\n        return this._state;\n    }\n\n    get previousState(): readonly number[] {\n        return this.tempState;\n    }\n\n    evolve() {\n        this.state.forEach((_, index) => { this.evolveCellAt(index); });\n        const stateSave = this.tempState;\n        this.tempState = this._state;\n        this._state = stateSave;\n    }\n\n    private evolveCellAt(index: number) {\n        const code = this.lookupTable.length - this.computeCodeFor(index) - 1;\n        this.tempState[index] = code >= 0 ? this.lookupTable[code] : 0;\n    }\n\n    private computeCodeFor(index: number) {\n        let exponential = Math.pow(this.states, 2 * this.radius)\n        let lookUpIndex: number;\n        let code = 0;\n        if (index === 0) {\n            for (let i = -this.radius; i <= this.radius; i++) {\n                lookUpIndex = this.wrappedIndex(i);\n                code += exponential * this._state[lookUpIndex];\n                exponential /= this.states;\n            }\n        } else {\n            lookUpIndex = this.wrappedIndex(index - this.radius - 1);\n            let offsetA = exponential * this._state[lookUpIndex];\n            lookUpIndex = this.wrappedIndex(index + this.radius);\n            let offsetB = this._state[lookUpIndex];\n            code = (this.neighbourhoodCode[index - 1] - offsetA) * this.states + offsetB;\n        }\n        this.neighbourhoodCode[index] = code;\n        return code;\n    }\n\n    private wrappedIndex(index: number) {\n        return index < 0 ? index + this.size : index >= this.size ? index - this.size : index;\n    }\n\n\n    static Builder = class {\n        private states: number = 2;\n        private size: number = 100;\n        private rule: number = 0;\n        private randomInitialConfiguration: boolean = false;\n\n        withStates(states: number) {\n            if (states < 1) {\n                throw new Error(\"Number of states must be greater than 1\");\n            }\n            this.states = states;\n            return this;\n        }\n\n        withSize(size: number) {\n            this.size = size;\n            if (size <= 10) {\n                throw new Error(\"Size of cellular automata must be greater than 10\");\n            }\n            return this;\n        }\n\n        withRule(rule: number) {\n            this.rule = rule;\n            if (rule < 0) {\n                throw new Error(\"Rule must be a positive number\");\n            }\n            return this;\n        }\n\n        withRandomInitialConfiguration() {\n            this.randomInitialConfiguration = true;\n            return this;\n        }\n\n        build() {\n            const radius = 1;\n            const ruleCharacters = Array.from(BigInt(this.rule).toString(this.states));\n            const lookupTable: number[] = Array.from({ length: ruleCharacters.length });\n            for (let i = 0; i < ruleCharacters.length; i++) {\n                let character = ruleCharacters[i];\n                if (character >= '0' && character <= '9') {\n                    lookupTable[i] = +ruleCharacters[i] - +'0';\n                } else {\n                    lookupTable[i] = +ruleCharacters[i] - +'W'\n                }\n            }\n            const initialState = this.randomInitialConfiguration\n                ? Array.from({ length: this.size }, () => Math.round(Math.random()))\n                : Array.from({ length: this.size }, (_, index) => index === Math.floor(this.size / 2) ? 1 : 0);\n\n            return new ElementaryCellularAutomata1D(\n                this.states,\n                this.size,\n                radius,\n                this.rule,  \n                initialState,\n                lookupTable\n            );\n        }\n    }\n}","import { CellularAutomata1D } from \"./cellularAutomata1D\";\n\nexport class TotalisticCellularAutomata1D implements CellularAutomata1D {\n    readonly states: number;\n    readonly size: number;\n    readonly radius: number;\n    readonly rule: number;\n    private _state: number[];\n    private tempState: number[];\n    private neighbourhoodCode: number[];\n    private lookupTable: number[];\n\n    constructor(states: number, size: number, radius: number, rule: number, initialState: number[], lookupTable: number[]) {\n        this.states = states;\n        this.size = size;\n        this.radius = radius;\n        this.rule = rule;\n        this._state = initialState;\n        this.lookupTable = lookupTable;\n        this.tempState = Array.from({ length: size });\n        this.neighbourhoodCode = Array.from({ length: size });\n    }\n\n    get state(): ReadonlyArray<number> {\n        return this._state;\n    }\n\n    get previousState(): readonly number[] {\n        return this.tempState;\n    }\n\n    evolve() {\n        this.state.forEach((_, index) => {\n            this.evolveCellAt(index);\n        });\n        const stateSave = this.tempState;\n        this.tempState = this._state;\n        this._state = stateSave;\n    }\n\n    private evolveCellAt(index: number) {\n        const code = this.lookupTable.length - this.computeCodeFor(index) - 1;\n        this.tempState[index] = code >= 0 ? this.lookupTable[code] : 0;\n    }\n\n    private computeCodeFor(index: number) {\n        let lookUpIndex: number;\n        let numberOfInvolvedCells = 2 * this.radius + 1;\n        let code = 0;\n        if (index === 0) {\n            for (let i = -this.radius; i < numberOfInvolvedCells; i++) {\n                lookUpIndex = this.wrappedIndex(i);\n                code += this._state[lookUpIndex];\n            }\n        } else {\n            lookUpIndex = this.wrappedIndex(index - this.radius - 1);\n            let offsetA = this._state[lookUpIndex];\n            lookUpIndex = this.wrappedIndex(index + this.radius);\n            let offsetB = this._state[lookUpIndex];\n            code = this.neighbourhoodCode[index - 1] - offsetA + offsetB;\n        }\n        this.neighbourhoodCode[index] = code;\n        return code;\n    }\n\n    private wrappedIndex(index: number) {\n        return index < 0 ? index + this.size : index >= this.size ? index - this.size : index;\n    }\n}","import { ElementaryCellularAutomata1D } from './1d/elementaryCellularAutomata1D';\nimport { TotalisticCellularAutomata1D } from './1d/totalisticCellularAutomata1D';\n\nexport interface CellularAutomata1D {\n    readonly radius: any;\n    readonly size: number;\n    readonly rule: number;\n    readonly states: number;\n    get state(): ReadonlyArray<number>;\n    get previousState(): ReadonlyArray<number>;\n    evolve(): void;\n};\n\nexport enum Dimensions {\n    UNIDIMENSIONAL,\n    BIDIMENSIONAL\n}\n\nexport enum Type {\n    TOTALISTIC,\n    ELEMENTARY\n}\n\nexport enum Size {\n    EXTRA_SMALL,\n    SMALL,\n    MEDIUM,\n    LARGE,\n    EXTRA_LARGE\n}\n\nexport class CellularAutomata {\n    static Builder = class {\n        private dimensions: Dimensions = Dimensions.UNIDIMENSIONAL;\n        private type: Type = Type.ELEMENTARY;\n        private states: number = 2;\n        private size: number = 100;\n        private rule: number = 0;\n        private randomInitialConfiguration: boolean = false;\n\n        withDimensions(dimensions: Dimensions) {\n            if (dimensions === Dimensions.BIDIMENSIONAL) {\n                throw new Error(\"Bi-dimensional automata not implemented yet\");\n            }\n            this.dimensions = dimensions;\n            return this;\n        }\n\n        withType(type: Type) {\n            this.type = type;\n            return this;\n        }\n\n        withStates(states: number) {\n            if (states < 1) {\n                throw new Error(\"Number of states must be greater than 1\");\n            }\n            this.states = states;\n            return this;\n        }\n\n        withSize(size: Size) {\n            const sketch = document.getElementById('sketch');\n            const sketchWidth = sketch === null ? 0 : sketch.clientWidth;\n\n            switch (size) {\n                case Size.EXTRA_SMALL: this.size = sketchWidth / 30; break;\n                case Size.SMALL: this.size = sketchWidth / 15; break;\n                case Size.MEDIUM: this.size = sketchWidth / 5; break;\n                case Size.LARGE: this.size = sketchWidth / 2; break;\n                case Size.EXTRA_LARGE: this.size = sketchWidth / 1; break;\n            };\n            this.size = 201;\n            return this;\n        }\n\n        withRule(rule: number) {\n            this.rule = rule;\n            if (rule < 0) {\n                throw new Error(\"Rule must be a positive number\");\n            }\n            return this;\n        }\n\n        withRandomInitialConfiguration() {\n            this.randomInitialConfiguration = true;\n            return this;\n        }\n\n        build() {\n            return this.type === Type.TOTALISTIC ? this.buildTotallistic1D() : this.buildElementary1D();\n        }\n\n        private buildTotallistic1D() {\n            const radius = 1;\n            const ruleCharacters = Array.from(BigInt(this.rule).toString(this.states));\n            const lookupTable: number[] = Array.from({ length: ruleCharacters.length });\n            for (let i = 0; i < ruleCharacters.length; i++) {\n                lookupTable[i] = +ruleCharacters[i] - +'0';\n            }\n            const initialState = this.randomInitialConfiguration && Math.random() > 0.5\n                ? Array.from({ length: this.size }, () => Math.round(Math.random()))\n                : Array.from({ length: this.size }, (_, index) => index === Math.floor(this.size / 2) ? 1 : 0);\n\n            return new TotalisticCellularAutomata1D(\n                this.states,\n                this.size,\n                radius,\n                this.rule,\n                initialState,\n                lookupTable\n            );\n        }\n\n        private buildElementary1D() {\n            const radius = 1;\n            const ruleCharacters = Array.from(BigInt(this.rule).toString(this.states));\n            const lookupTable: number[] = Array.from({ length: ruleCharacters.length });\n\n            for (let i = 0; i < ruleCharacters.length; i++) {\n                let character = ruleCharacters[i];\n                if (character >= '0' && character <= '9') {\n                    lookupTable[i] = +ruleCharacters[i] - +'0';\n                } else {\n                    lookupTable[i] = +ruleCharacters[i] - +'W'\n                }\n            }\n            const initialState = this.randomInitialConfiguration && Math.random() > 0.5\n                ? Array.from({ length: this.size }, () => Math.round(Math.random()))\n                : Array.from({ length: this.size }, (_, index) => index === Math.floor(this.size / 2) ? 1 : 0);\n            \n            return new ElementaryCellularAutomata1D(\n                this.states,\n                this.size,\n                radius,\n                this.rule,\n                initialState,\n                lookupTable\n            );\n        }\n    }\n}\n\nexport * from './1d/totalisticCellularAutomata1D';\nexport * from './1d/elementaryCellularAutomata1D'\n","import { CellularAutomata, Dimensions, Size, Type } from \"../cellular-automata\";\nimport { CellularAutomata1D } from \"../cellular-automata/1d/cellularAutomata1D\";\n\nexport class AutomataSelector {\n    randomAutomata() {\n        let radius = 1;\n        let type = Math.random() < 0.5 ? Type.ELEMENTARY : Type.TOTALISTIC;\n        let states = 1 + Math.ceil(Math.random() * 2);\n        let maxRule = 0;\n        switch (type) {\n            case Type.ELEMENTARY:\n                maxRule = Math.pow(states, Math.pow(states, (2 * radius + 1))) - 1;\n                break;\n            case Type.TOTALISTIC:\n                maxRule = Math.pow(states, (states * (2 * radius + 1))) - 1;\n                break;\n        }\n\n        while (true) {\n            let rule = Math.round(Math.random() * maxRule);\n            let automata = new CellularAutomata.Builder()\n                .withSize(Size.MEDIUM)\n                .withStates(states)\n                .withType(type)\n                .withRandomInitialConfiguration()\n                .withDimensions(Dimensions.UNIDIMENSIONAL)\n                .withRule(rule)\n                .build();\n\n            let leeValues = new Set();\n\n            for (let step = 0; step < 100; step++) {\n                leeValues.add(this.leeDistance(automata));\n                automata.evolve();\n            }\n\n            if (leeValues.size >= 20 && leeValues.size <= 50) {\n                let result = new CellularAutomata.Builder()\n                    .withSize(Size.MEDIUM)\n                    .withStates(states)\n                    .withType(type)\n                    .withRandomInitialConfiguration()\n                    .withDimensions(Dimensions.UNIDIMENSIONAL)\n                    .withRule(rule)\n                    .build();\n\n                return result;\n            }\n        }\n    }\n\n    private leeDistance(automata: CellularAutomata1D) {\n        return automata.state.reduce((acc, _, index) => {\n            let euclideanDistance = Math.abs(automata.state[index] - automata.previousState[index])\n            let leeDistance = Math.min(euclideanDistance, automata.states - euclideanDistance)\n            return automata.state[index] == 0 ? acc : acc + leeDistance;\n        }, 0);\n    }\n}","import { useState } from \"react\";\nimport SketchProvider from \"../sketch/SketchProvider\";\nimport CellularAutomataSketch from \"../sketch/sketch\";\nimport './styles/HumanMusicStyle.css'\nimport * as Tone from 'tone'\nimport earth from '../resources/images/earth.png'\nimport github from '../resources/images/github.png'\nimport { AutomataSelector } from \"./automata-selector\";\nimport { CellularAutomata1D } from \"../cellular-automata\";\n\nexport default function HumanMusic() {\n    const [started, setStarted] = useState(false);\n    const [automata, setAutomata] = useState(null as unknown as CellularAutomata1D);\n\n    let ruleSelector = new AutomataSelector();\n\n    async function start() {\n        await Tone.start();\n        setStarted(true);\n        randomiseAutomata();\n    }\n\n    async function randomiseAutomata() {\n        const automata = ruleSelector.randomAutomata();\n        setAutomata(automata);\n    }\n\n    return <SketchProvider.Provider value={automata}>\n        <meta name=\"viewport\" content=\"width=device-width, height=device-height, initial-scale=1.0, viewport-fit=cover\"/> \n        <body className=\"HumanMusic\">\n            <div className=\"Headers\">\n                <img src={earth} className=\"EarthRadioLogo\" alt=\"Earth\" />\n                <h1 className=\"Title\">Human Music</h1>\n                <h2 className=\"Subtitle\">by Earth Radio</h2>\n            </div>\n            <div className=\"Automata\">\n                <div className=\"flip-card\">\n                    <div className=\"flip-card-inner\">\n                        <div className=\"flip-card-front\">\n                            <CellularAutomataSketch />\n                        </div>\n                        <div className=\"flip-card-back\">\n                            <p className=\"PlayingRule\">{started ? \"Playing rule: \" + automata?.rule : \"--\"}</p>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"Controllers\">\n                    {started\n                        ? <button className=\"ruleButton\" onClick={randomiseAutomata}>Randomise</button>\n                        : <button className=\"startButton\" onClick={start}>Start</button>\n                    }\n                </div>\n            </div>\n            <div className=\"Misc\">\n                <a className=\"GitHubLink\" href=\"https://github.com/juankysoriano/human-music\">\n                    <img className=\"GitHubLogo\" alt=\"GitHub\" src={github}></img>\n                </a>\n                <p className=\"Dad\">A mi padre ♥</p>\n            </div>\n        </body>\n    </SketchProvider.Provider>\n}","export default \"data:image/png;base64,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\"","import ReactDOM from 'react-dom';\nimport HumanMusic from './human-music/human-music';\nimport './styles/index.css';\n\nReactDOM.render(\n  <HumanMusic/>,\n  document.getElementById('root')\n);"],"sourceRoot":""}